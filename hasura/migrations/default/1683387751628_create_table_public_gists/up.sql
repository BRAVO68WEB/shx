CREATE TABLE "public"."gists" ("gistID" uuid NOT NULL DEFAULT gen_random_uuid(), "content" text NOT NULL, "gist_url_key" text NOT NULL DEFAULT generate_short_url(), "isPrivate" boolean NOT NULL DEFAULT false, "passkey" text, "isOneTimeOnly" boolean NOT NULL DEFAULT false, "views" numeric NOT NULL DEFAULT 0, "creator_ip" text, "created_on" timestamptz NOT NULL DEFAULT now(), "apikeyUsed" uuid NOT NULL, PRIMARY KEY ("gistID") , FOREIGN KEY ("apikeyUsed") REFERENCES "public"."apikeys"("keyID") ON UPDATE cascade ON DELETE cascade, UNIQUE ("gistID"), UNIQUE ("passkey"));
CREATE EXTENSION IF NOT EXISTS pgcrypto;
